<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>bdep-release(1) bdep 0.13.0</title>

  <style type="text/css">
/* file      : common.css
 * license   : MIT; see accompanying LICENSE file
 */

html
{
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-weight: normal;
  font-size: 18px;
  line-height: 1.4em;
  letter-spacing: 0.01em;

  color: #292929;
}

body {margin: 0;} /* There is non-0 default margin for body. */

/* See notes on what's going on here. */
body {min-width: 17em;}
@media only screen and (min-width: 360px)
{
  body {min-width: 19em;}
}

/*
 * Header (optional).
 */

#header-bar
{
  width: 100%;

  background: rgba(0, 0, 0, 0.04);
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);

  padding: .4em 0 .42em 0;
  margin: 0 0 1.4em 0;
}

#header
{
  /* Same as in #content. */
  max-width: 41em;
  margin: 0 auto 0 auto;
  padding: 0 .4em 0 .4em;

  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;

  width: 100%;
  display: table;
  border: none;
  border-collapse: collapse;
}

#header-logo, #header-menu
{
  display: table-cell;
  border: none;
  padding: 0;
  vertical-align: middle;
}

#header-logo {text-align: left;}
#header-menu {text-align: right;}

/* These overlap with #header's margin because of border collapsing. */
#header-logo {padding-left: .4em;}
#header-menu {padding-right: .4em;}

#header-logo a
{
  color: #000;
  text-decoration: none;
  outline: none;
}
#header-logo a:visited {color: #000;}
#header-logo a:hover, #header-logo a:active {color: #000;}

#header-menu a
{
  font-size: 0.889em;
  line-height: 1.4em;
  text-align: right;
  margin-left: 1.2em;
  white-space: nowrap;
  letter-spacing: 0;
}

#header-menu a
{
  color: #000;
  outline: none;
}
#header-menu a:visited {color: #000;}
#header-menu a:hover, #header-menu a:active
{
  color: #3870c0;
  text-decoration: none;
}

/* Flexbox-based improvements though the above works reasonably well. */
#header-menu-body
{
  width: 100%;

  display: -webkit-inline-flex;
  display: inline-flex;

  -webkit-flex-flow: row wrap;
  flex-flow: row wrap;

  -webkit-justify-content: flex-end;
  justify-content: flex-end;
}

/* Whether we want it (and at which point) depends on the size of the menu. */
/*
@media only screen and (max-width: 567px)
{
  #header-menu-body
  {
    -webkit-flex-direction: column;
    flex-direction: column;
  }
}
*/

/*
 * Content.
 */

#content
{
  max-width: 41em;
  margin: 0 auto 0 auto;
  padding: 0 .4em 0 .4em; /* Space between text and browser frame. */

  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

/*
 * Footer (optional).
 */

#footer
{
  color: #767676;
  font-size: 0.7223em;
  line-height: 1.3em;
  margin: 2.2em 0 1em 0;
  text-align: center;
}

#footer a
{
  color: #767676;
  text-decoration: underline;
}
#footer a:visited {color: #767676;}
#footer a:hover, #footer a:active {color: #3870c0;}

/* Screen size indicator in the footer. The before/after content is in case
   we don't have any content in the footer. Margin is to actually see the
   border separate from the browser frame. */

/*
#footer:before {content: "\A0";}
#footer:after {content: "\A0";}

#footer
{
  border-left: 1px solid;
  border-right: 1px solid;
  margin-left: 1px;
  margin-right: 1px;
}

@media only screen and (max-width: 359px)
{
  #footer {border-color: red;}
}

@media only screen and (min-width: 360px) and (max-width: 567px)
{
  #footer {border-color: orange;}
}

@media only screen and (min-width: 568px) and (max-width: 1023px)
{
  #footer {border-color: blue;}
}

@media only screen and (min-width: 1024px)
{
  #footer {border-color: green;}
}
*/

/*
 * Common elements.
 */

p, li, dd {text-align: justify;}
.code {text-align: left;} /* Manually aligned. */
pre {text-align: left;}   /* If it is inside li/dd. */

/* Notes. */

.note
{
  color: #606060;
}

div.note
{
  margin: 2em 0 2em 0; /* The same top/bottom margings as pre box. */

  padding-left: 0.5em;
  border: 0.25em;
  border-left-style: solid;
  border-color: #808080;

  page-break-inside: avoid;
}

div.note :first-child {margin-top:    0;}
div.note :last-child  {margin-bottom: 0;}

span.note::before {content: "[Note: "}
span.note::after  {content: "]"}

/* Links. */
a
{
  color: #3870c0;
  /*color: #4078c0;*/
  text-decoration: none;
}

a:hover, a:active
{
/*color: #006fbf;*/
/*color: #0087e7;*/
  text-decoration: underline;
}

a:visited
{
/*color: #003388;*/
  color: #00409c;
}

/* Standard paragraph. */

p, pre {margin: 1em 0 1em 0;}

/* Standard lists. */
ul, ol, dl {margin: 1em 0 1em 0;}
ul li, ol li {margin: 0 0 .4em 0;}
ul li {list-style-type: circle;}
dl dt {margin: 0 0 0 0;}
dl dd {margin: 0 0 .6em 1.8em;}

code, pre
{
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 0.92em;
  letter-spacing: 0;
}

pre {white-space: pre-wrap;}
@media only screen and (max-width: 567px)
{
  pre {word-break: break-all;}
}

/* Use page rather than system font settings. */
input
{
  font-family: inherit;
  font-weight: inherit;
  font-size:   inherit;
  line-height: inherit;
}

/* file      : pre-box.css
 * license   : MIT; see accompanying LICENSE file
 */

/* Note: see also p-code-box.css. */

pre
{
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 0.2em;
  padding: .8em .4em .8em .4em;
  margin: 2em -.4em 2em -.4em; /* Use margins of #content. */
}

/* file      : man.css
 * license   : MIT; see accompanying LICENSE file
 */

/* Bases:
 *
 * common.css
 * pre-box.css
 *
 */

#content
{
  max-width: 42.1em;
  padding-left: 1.5em; /* Reserve for the heading. */
}

h1
{
  font-weight: normal;
  font-size: 1.58em;
  line-height: 1.4em;
  margin: 1.6em 0 .6em -.88em;
}

/* Definition list for options. */
dl.options dt {margin: 1em 0 0 0;}
dl.options dd {margin: .1em 0 0 4.5em;}

/* Make lists inside option descriptions a tad smaller. */
dl.options dd ul, dl.options dd ol, dl.options dd dl
{
  font-size: 0.889em;
  line-height: 1.4em;
}

  </style>

</head>
<body>
<div id="content">

  <h1>NAME</h1>

  <p><b><code>bdep-release</code></b> &#8211; manage project's version during release</p>
  <h1>SYNOPSIS</h1>

  <p class="code"><code><b>bdep release</b> [<i>options</i>]
  [<i>prj-spec</i>]</code></p>

  <p class="code"><code><i>prj-spec</i> = <b>--directory</b>|<b>-d</b>
  <i>prj-dir</i> | <i>pkg-spec</i>
  <br/>
  <i>pkg-spec</i> = (<b>--directory</b>|<b>-d</b>
  <i>pkg-dir</i>)...</code></p>

  <h1>DESCRIPTION</h1>

  <p>The <code><b>release</b></code> command manages the project's version
  during the release. Specifically, it first changes the snapshot version to
  the corresponding release version in each project package's
  <code><b>manifest</b></code> file, commits these changes (unless
  <code><b>--no-commit</b></code> is specified), tags this commit (unless
  <code><b>--no-tag</b></code> is specified), and, if
  <code><b>--push</b></code> is specified, pushes the changes to the remote.
  Unless <code><b>--no-open</b></code> is specified, the
  <code><b>release</b></code> command then opens the next development cycle by
  changing the version to a snapshot, committing these changes (unless
  <code><b>--no-commit</b></code> is specified), and, if
  <code><b>--push</b></code> is specified, pushing them to the remote. Note
  that committing, tagging, and pushing is currently only supported for
  <code><b>git(1)</b></code> project repositories.</p>

  <p>The <code><b>release</b></code> command can also be used to release a new
  package revision by passing the <code><b>--revision</b></code> option. In
  this mode <code><b>release</b></code> increments the current version's
  revision component in each project package's <code><b>manifest</b></code>
  file, commits these changes (unless <code><b>--no-commit</b></code> is
  specified), tags this commit (unless <code><b>--no-tag</b></code> is
  specified), and, if <code><b>--push</b></code> is specified, pushes the
  changes to the remote. In this mode <code><b>release</b></code> can be
  optionally instructed to update an existing tag for the current version to
  point to the latest revision (<code><b>--current-tag=update</b></code>) or
  to remove it (<code><b>--current-tag=remove</b></code>).</p>

  <p>When releasing a revision, the project's repository index is expected to
  already contain other changes since for a revision all the associated
  changes, including to version, must belong to a single commit.
  Alternatively, a revision can be released by amending one or more existing
  commits using the <code><b>--amend</b></code> and
  <code><b>--squash</b></code> options. In this case the index may still
  contain additional changes but is not required to.</p>

  <p>The <code><b>release</b></code> command also has a number of <i>continue
  modes</i> that allow the completion of steps that were previously suppressed
  with the <code><b>--no-*</b></code> options in the above main modes. These
  are <code><b>--tag</b></code> which tags the release commit and, if
  <code><b>--push</b></code> is specified, pushes it to the remote as well as
  <code><b>--open</b></code> which performs the opening of the next
  development cycle as described above.</p>

  <p>In all the modes that perform a commit, if the project's repository index
  already contains other changes, then the commit message is automatically
  opened for editing unless <code><b>--no-edit</b></code> is specified. The
  editing of the commit message in the absence of other changes can be
  requested with the <code><b>--edit</b></code> option.</p>

  <p>Normally, <code><b>release</b></code> operates on all the packages in a
  project. If no project directory is specified, then the current working
  directory is assumed and all the packages are released, even if the current
  directory is a package directory. If, however, one or more package
  directories are specified explicitly with
  <code><b>--directory</b>|<b>-d</b></code>, then <code><b>release</b></code>
  assumes you know what you are doing and only releases these packages. All
  the packages being released must have the same version but may have
  different revisions.</p>

  <h1>RELEASE OPTIONS</h1>

  <dl class="options">
    <dt><code><b>--revision</b></code></dt>
    <dd>Release a new package revision instead of a new version.</dd>

    <dt><code><b>--no-commit</b></code></dt>
    <dd>Don't commit the changes. Implies <code><b>--no-tag</b></code> and, in
    the version release mode, <code><b>--no-open</b></code>.</dd>

    <dt><code><b>--no-tag</b></code></dt>
    <dd>Don't tag the release commit. Tagging can be performed later using the
    <code><b>--tag</b></code> mode option.</dd>

    <dt><code><b>--tag</b></code></dt>
    <dd>Tag the already released version instead of releasing a new one.</dd>

    <dt><code><b>--current-tag</b></code> <code><i>action</i></code></dt>
    <dd>Specify what to do with an existing tag for the current version when
    tagging a new revision. Valid values for this option are
    <code><b>keep</b></code> (default), <code><b>update</b></code>, and
    <code><b>remove</b></code>.</dd>

    <dt><code><b>--push</b></code></dt>
    <dd>Push the committed changes and tags to the remote.</dd>

    <dt><code><b>--show-push</b></code></dt>
    <dd>Print the push command instead of executing it. This allows examining
    the committed changes and tags before pushing them to the remote. Note
    that the command is printed to <code><b>stdout</b></code>.</dd>

    <dt><code><b>--no-open</b></code></dt>
    <dd>Don't open the next development cycle. Opening can be performed later
    using the <code><b>--open</b></code> mode option.</dd>

    <dt><code><b>--open</b></code></dt>
    <dd>Open the next development cycle instead of releasing a new
    version.</dd>

    <dt><code><b>--amend</b></code></dt>
    <dd>Release a revision by amending the latest commit instead of making a
    new one.</dd>

    <dt><code><b>--squash</b></code> <code><i>num</i></code></dt>
    <dd>Release a revision by squashing the specified number of previous
    commits and then amending the result. Requires the
    <code><b>--amend</b></code> option to be specified.</dd>

    <dt><code><b>--alpha</b></code></dt>
    <dd>Release an alpha instead of the final version.</dd>

    <dt><code><b>--beta</b></code></dt>
    <dd>Release a beta version instead of the final version.</dd>

    <dt><code><b>--minor</b></code></dt>
    <dd>Release the next minor version instead of the current patch.</dd>

    <dt><code><b>--major</b></code></dt>
    <dd>Release the next major version instead of the current minor or
    patch.</dd>

    <dt><code><b>--open-beta</b></code></dt>
    <dd>Open the development cycle with the next beta version.</dd>

    <dt><code><b>--open-patch</b></code></dt>
    <dd>Open the development cycle with the next patch version. This is the
    default if the current patch version is not <code>0</code> (bugfix release
    series).</dd>

    <dt><code><b>--open-minor</b></code></dt>
    <dd>Open the development cycle with the next minor version. This is the
    default if the current patch version is <code>0</code> (feature release
    series).</dd>

    <dt><code><b>--open-major</b></code></dt>
    <dd>Open the development cycle with the next major version.</dd>

    <dt><code><b>--open-base</b></code> <code><i>version</i></code></dt>
    <dd>Open the development cycle with the specified version. The base
    version should be in the
    <code><i>major</i><b>.</b><i>minor</i><code>.</code><i>patch</i></code>
    form with the opened version becoming
    <code><i>major</i><b>.</b><i>minor</i><b>.</b><i>patch</i><b>-a.0.z</b></code>.</dd>

    <dt><code><b>--edit</b></code></dt>
    <dd>Open the commit message for editing.</dd>

    <dt><code><b>--no-edit</b></code></dt>
    <dd>Don't open the commit message for editing.</dd>

    <dt><code><b>--force</b></code> <code><i>check</i></code></dt>
    <dd>Force releasing, disabling the specified check. Repeat this option to
    disable multiple checks.</dd>

    <dt><code><b>--yes</b></code>|<code><b>-y</b></code></dt>
    <dd>Don't prompt for confirmation before releasing.</dd>

    <dt><code><b>--directory</b></code>|<code><b>-d</b></code> <code><i>dir</i></code></dt>
    <dd>Assume project/package is in the specified directory rather than in
    the current working directory.</dd>
  </dl>

  <h1>COMMON OPTIONS</h1>

  <p>The common options are summarized below with a more detailed description
  available in <a
  href="bdep-common-options.xhtml"><code><b>bdep-common-options(1)</b></code></a>.</p>

  <dl class="options">
    <dt><code><b>-v</b></code></dt>
    <dd>Print essential underlying commands being executed.</dd>

    <dt><code><b>-V</b></code></dt>
    <dd>Print all underlying commands being executed.</dd>

    <dt><code><b>--quiet</b></code>|<code><b>-q</b></code></dt>
    <dd>Run quietly, only printing error messages.</dd>

    <dt><code><b>--verbose</b></code> <code><i>level</i></code></dt>
    <dd>Set the diagnostics verbosity to <code><i>level</i></code> between 0
    and 6.</dd>

    <dt><code><b>--jobs</b></code>|<code><b>-j</b></code> <code><i>num</i></code></dt>
    <dd>Number of jobs to perform in parallel.</dd>

    <dt><code><b>--no-progress</b></code></dt>
    <dd>Suppress progress indicators for long-lasting operations, such as
    network transfers, building, etc.</dd>

    <dt><code><b>--bpkg</b></code> <code><i>path</i></code></dt>
    <dd>The package manager program to be used for build configuration
    management.</dd>

    <dt><code><b>--bpkg-option</b></code> <code><i>opt</i></code></dt>
    <dd>Additional option to be passed to the package manager program.</dd>

    <dt><code><b>--build</b></code> <code><i>path</i></code></dt>
    <dd>The build program to be used to build packages.</dd>

    <dt><code><b>--build-option</b></code> <code><i>opt</i></code></dt>
    <dd>Additional option to be passed to the build program.</dd>

    <dt><code><b>--curl</b></code> <code><i>path</i></code></dt>
    <dd>The curl program to be used for network operations.</dd>

    <dt><code><b>--curl-option</b></code> <code><i>opt</i></code></dt>
    <dd>Additional option to be passed to the curl program.</dd>

    <dt><code><b>--pager</b></code> <code><i>path</i></code></dt>
    <dd>The pager program to be used to show long text.</dd>

    <dt><code><b>--pager-option</b></code> <code><i>opt</i></code></dt>
    <dd>Additional option to be passed to the pager program.</dd>

    <dt><code><b>--options-file</b></code> <code><i>file</i></code></dt>
    <dd>Read additional options from <code><i>file</i></code>.</dd>

    <dt><code><b>--default-options</b></code> <code><i>dir</i></code></dt>
    <dd>The directory to load additional default options files from.</dd>

    <dt><code><b>--no-default-options</b></code></dt>
    <dd>Don't load default options files.</dd>
  </dl>

  <h1>DEFAULT OPTIONS FILES</h1>

  <p>See <a
  href="bdep-default-options-files.xhtml"><code><b>bdep-default-options-files(1)</b></code></a>
  for an overview of the default options files. For the
  <code><b>release</b></code> command the search start directory is the
  project directory. The following options files are searched for in each
  directory and, if found, loaded in the order listed:</p>

  <pre>bdep.options
bdep-release.options
bdep-release-{version|revision|open|tag}.options # (mode-dependent)</pre>

  <p>The following <code><b>release</b></code> command options cannot be
  specified in the default options files:</p>

  <pre>--directory|-d
--revision
--open
--tag</pre>

  <h1>BUGS</h1>

  <p>Send bug reports to the
  <a href="mailto:users@build2.org">users@build2.org</a> mailing list.</p>

</div>

<div id="footer">
Copyright &#169; 2014-2020 the build2 authors.<br/>
Permission is granted to copy, distribute and/or modify this document under
the terms of the MIT License.
</div>

</body>
</html>
